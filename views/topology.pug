extends layout

block content
  header.appbar
    a.back(href="/" title="Back to home") ← Back
    h1 Topology Sandbox
    div.status Sketch network ideas, connect nodes, export JSON.

  main.container.topology-container
    .topology-shell
      aside.topology-panel.palette
        h2 Palette
        p.text-muted Drag into the canvas or click to add.
        .palette-buttons
          button(type="button" data-node-type="router") Router
          button(type="button" data-node-type="switch") Switch
          button(type="button" data-node-type="firewall") Firewall
          button(type="button" data-node-type="server") Server
          button(type="button" data-node-type="cloud") Cloud
        section.tool-section
          h2 Links
          p.text-muted Click two nodes while link mode is active.
          button#link-mode(type="button") Start Link Mode
          button#cancel-link(type="button" disabled) Cancel Active Link
        section.tool-section
          h2 Bonds
          p.text-muted Group redundant links that share a node.
          button#bond-mode(type="button") Start Bond Mode
          button#cancel-bond(type="button" disabled) Cancel Bond Selection
      section.topology-panel.workspace
        .workspace-toolbar
          div.canvas-actions
            button#clear-canvas(type="button") Clear Canvas
            button#export-topology(type="button") Export JSON
            button#export-topology-jpg(type="button") Export JPG
            button#toggle-snap(type="button") Snap Grid: Off
            button#fit-view(type="button") Center View
            label.file-import
              input#import-topology(type="file" accept="application/json")
              span Import JSON
        .workspace-stage
          svg#link-layer(xmlns="http://www.w3.org/2000/svg")
            g#bond-layer
          div#topology-canvas
            p.empty-hint Add nodes to get started.
          svg#label-layer(xmlns="http://www.w3.org/2000/svg")
      aside.topology-panel.details
        h2 Inspector
        p.text-muted Select a node or link to edit its details.
        form#node-form.hidden(autocomplete="off")
          input(type="hidden" name="node-id")
          label(for="node-label") Label
          input#node-label(type="text" name="label" placeholder="Router A")
          label(for="node-type") Type
          select#node-type(name="type")
            option(value="router") Router
            option(value="switch") Switch
            option(value="firewall") Firewall
            option(value="server") Server
            option(value="cloud") Cloud
            option(value="workstation") Workstation
          label(for="node-notes") Notes
          textarea#node-notes(name="notes" rows="3" placeholder="Purpose, interfaces, etc.")
          button#delete-node(type="button" class="danger") Delete Node
        form#link-form.hidden(autocomplete="off")
          input(type="hidden" name="link-id")
          label(for="link-label") Link label
          input#link-label(type="text" name="label" placeholder="Backbone 10G")
          label(for="link-a") Endpoint A details
          input#link-a(type="text" name="aDetails" placeholder="Gi0/0 · 10.0.0.1/30")
          label(for="link-b") Endpoint B details
          input#link-b(type="text" name="bDetails" placeholder="Gi0/1 · 10.0.0.2/30")
          label(for="link-notes") Notes
          textarea#link-notes(name="notes" rows="3" placeholder="Protocols, VLANs, QoS...")
          button#delete-link(type="button" class="danger") Delete Link
        form#bond-form.hidden(autocomplete="off")
          input(type="hidden" name="bond-id")
          label(for="bond-label") Bond label
          input#bond-label(type="text" name="label" placeholder="Port-Channel 10")
          p#bond-count.text-muted(style="font-size:12px") Linked circuits
          ul#bond-links
          button#delete-bond(type="button" class="danger") Delete Bond

block scripts
  script(defer src="/topology.js")
