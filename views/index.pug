extends layout

block content
  header.appbar
    h1 Shared Pad
    div.status
      span Enter a key to open a pad

  main.container
    form(action="/pad", method="get", class="card", id="roomForm")
      label(for="room") Enter a key / pin
      .row
        input#room(type="text" name="room" placeholder="e.g. bob123" required minlength="1" maxlength="64" pattern="[A-Za-z0-9_-]+")
        button(type="submit" title="Go to this pad") Go
        button#gen(type="button" title="Generate a random 6-char key") Generate

  footer.foot
    p ⚠️ This is a simple shared text pad. It is <strong>not a secure or encrypted transfer service</strong>. Do not paste secrets.

  //- Tiny inline script to generate a 6-char alphanumeric key and submit
  script.
    (function () {
      var btn = document.getElementById('gen');
      var input = document.getElementById('room');
      var form = document.getElementById('roomForm');
      if (!btn || !input || !form) return;
      function genKey() {
        var alphabet = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789'; // no 0/O/I/l
        var out = '';
        for (var i = 0; i < 6; i++) out += alphabet[Math.floor(Math.random() * alphabet.length)];
        return out;
      }
      btn.addEventListener('click', function () {
        input.value = genKey();
        form.submit();
      });
    })();
